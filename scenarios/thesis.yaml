# This scenario is the scenario included as part of Chapter 6, which is intended
# to reflect equivalent functionality to the ForTrace and SFX code included in the
# section.
#
# Run with one of the following:
#   akf-translate scenarios/thesis.yaml --translate
#   akf-translate scenarios/thesis.yaml --execute

name: Minimal scenario
description: Sample included with thesis
author: Lloyd Gonzales
seed: "0"
libraries:
  - akflib.modules
  - akf_windows.modules
actions:
  # Create a new CASE bundle and start a virtual machine.
  - name: Instantiate a hypervisor object tied to a specific virtual machine
    module: akflib.modules.vbox.VBoxCreateModule
    args:
      machine_name: "akf-windows-1"
  - name: Start the virtual machine
    module: akflib.modules.vbox.VBoxStartMachineModule

  # Visit a website using Mcirosoft Edge. A temporary instance of the Chromium
  # subservice API is created for the lietime of this module.
  - name: Visit a single website
    module: akf_windows.modules.chromium.ChromiumVisitURLsModule
    args:
      browser: "msedge"
      urls: 
       - "https://www.google.com"

  # Stop the virtual machine and export the virtual machine to a disk image.
  - name: Stop the virtual machine
    module: akflib.modules.vbox.VBoxStopMachineModule
    args:
      force: false
  - name: Export the virtual machine to a disk image
    module: akflib.modules.vbox.VBoxCreateDiskImageModule
    args:
      output_path: "C:/Users/user/Desktop/akf-windows_1.raw"
      image_format: "raw"
    